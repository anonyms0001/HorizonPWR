<div class="container mx-auto my-8 px-4">
  <div class="flex justify-between items-center mb-4">
    <h1 class="h3">Proposals</h1>
    <!--        <div-->
    <!--          data-action="load@piechart#connect"-->
    <!--          data-controller="piechart"-->
    <!--          data-piechart-options-value='{"plugins" : { "legend" : { "position" : "top" }, "title" : {"display": true, "text": "Chart.js Doughnut Chart"}} }'-->
    <!--          data-piechart-data-value='{ "labels": ["January", "February", "March", "April", "May", "June", "July"], "datasets": [{ "label": "My First dataset", "backgroundColor": ["red", "yellow", "blue", "purple", "orange", "navy", "pink"],  "borderColor": "#ffffff", "data": [37, 83, 78, 54, 12, 5, 99] }] }'-->
    <!--        >-->

    <!--          <button data-action="piechart#update">Update me!</button>-->
    <!--        </div>-->
    <% if @proposals.any? %>
      <%= link_to t("shared.scaffold.new.title", model: "Proposal"), new_proposal_path, class: "btn btn-primary" %>
    <% end %>
  </div>
  <% if @proposals.any? %>
    <div class="bg-white rounded shadow table-responsive">
      <table class="table">
        <thead>
        <tr>
          <th class="p-3 uppercase text-left text-xs"><%= sortable @proposals, :name, "Name", class: "text-gray-700" %></th>
          <th class="p-3 uppercase text-left text-xs text-gray-700 w-20"><%= t("shared.scaffold.actions") %></th>
        </tr>
        </thead>
        <tbody>
        <% @proposals.each do |proposal| %>
          <tr class="group border-t border-gray-400 hover:bg-gray-100">
            <td class="p-3"><%= proposal.name %></td>
            <td>
              <%= link_to t("shared.scaffold.view"), proposal, class: "btn btn-link no-underline" %>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>
      <section aria-labelledby="quick-links-title">
        <sec class="rounded-lg bg-gray-200 overflow-hidden shadow divide-y divide-gray-200 sm:divide-y-0 sm:grid sm:grid-cols-4 sm:gap-px">
          <h2 class="sr-only" id="quick-links-title">Quick links</h2>
          <div class="rounded-tl-lg rounded-tr-lg sm:rounded-tr-none relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-cyan-500">
            <canvas
              data-controller="piechart"
              data-piechart-type-value="doughnut"
              data-piechart-data-value="<%= @chart_data.to_json %>"
              data-piechart-options-value="<%= @chart_options.to_json %>"></canvas>
          </div>

          <div class="sm:rounded-tr-lg relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-cyan-500">
            <canvas
              data-controller="piechart"
              data-piechart-type-value="doughnut"
              data-piechart-data-value="<%= @chart_data.to_json %>"
              data-piechart-options-value="<%= @chart_options.to_json %>"></canvas>
          </div>
          <div class="sm:rounded-tr-lg relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-cyan-500">
            <canvas
              data-controller="piechart"
              data-piechart-type-value="doughnut"
              data-piechart-data-value="<%= @chart_data.to_json %>"
              data-piechart-options-value="<%= @chart_options.to_json %>"></canvas>
          </div>
          <div class="sm:rounded-tr-lg relative group bg-white p-6 focus-within:ring-2 focus-within:ring-inset focus-within:ring-cyan-500">
            <canvas
              data-controller="piechart"
              data-piechart-type-value="doughnut"
              data-piechart-data-value="<%= @chart_data.to_json %>"
              data-piechart-options-value="<%= @chart_options.to_json %>"></canvas>
          </div>
      </section>
      <!--      <canvas-->
      <!--        data-controller="chart"-->
      <!--        data-chart-type-value="doughnut"-->
      <!--        data-chart-data-value="<%#= @chart_data.to_json %>"-->
      <!--        data-chart-options-value="<%#= @chart_options.to_json %>"-->
      <!--      ></canvas>-->
      <!--      <button data-action="chart#update">Update me!</button>-->
      <!--      <div-->
      <!--        data-controller="chart"-->
      <!--        data-chart-type-value="doughnut"-->
      <!--        data-chart-data-value="<%#= @chart_data.to_json %>"-->
      <!--        data-chart-options-value="<%#= @chart_options.to_json %>">-->
      <!--        <canvas data-chart-target="canvas"></canvas>-->
      <!--        <button data-action="piechart#update">Update me!</button>-->
      <!--      </div>-->
    </div>
    <% if @pagy.pages > 1 %>
      <div class="text-center my-6">
        <%== pagy_nav(@pagy) %>
      </div>
    <% end %>
  <% else %>
    <div class="bg-white rounded shadow flex flex-col items-center justify-between p-8 lg:flex-row">
      <%= image_tag "empty.svg", class: "mb-4 lg:w-1/2" %>
      <div class="flex-1 text-center">
        <p class="h3 mb-4">Create your first Proposal</p>
        <%= link_to t("shared.scaffold.new.title", model: "Proposal"), new_proposal_path, class: "btn btn-primary" %>
      </div>
    </div>
  <% end %>
</div>
